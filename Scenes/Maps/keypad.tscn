[gd_scene load_steps=2 format=3 uid="uid://bqdcp4134d0cu"]

[sub_resource type="GDScript" id="GDScript_ayi1g"]
script/source = "extends Control

const PASSWORD = \"1234\"
const EncryptionPassword =\"123\"
@onready var label = $VBoxContainer/MarginContainer/Label

# This MUST be the path to your main game scene to return to.
const WORLD_SCENE_PATH = \"res://world.tscn\" 

func key_press(digit):
    # Assuming a 4-digit password, limit the input length
    if label.text.length() < 10: 
        label.text += str(digit)

# --- DIGIT BUTTONS 1-10 ---

func _on_button_pressed() -> void: 	 # Button 1
    key_press(1)

func _on_button_3_pressed() -> void: # Button 2
    key_press(2)

func _on_button_2_pressed() -> void: # Button 3
    key_press(3)

func _on_button_4_pressed() -> void: # Button 4
    key_press(4)

func _on_button_5_pressed() -> void: # Button 5
    key_press(5)

func _on_button_6_pressed() -> void: # Button 6
    key_press(6)

func _on_button_7_pressed() -> void: # Button 7
    key_press(7)

func _on_button_8_pressed() -> void: # Button 8
    key_press(8)

func _on_button_9_pressed() -> void: # Button 9
    key_press(9)

func _on_button_10_pressed() -> void: # Button 10 (Assuming '0' key)
    key_press(0)

# --- CANCEL/EXIT BUTTON (Button 11) ---
# This button now exits the keypad scene.

func _on_button_11_pressed() -> void: # Button 11 (NOW CANCEL/EXIT)
    print(\"Canceling password entry and returning to world scene.\")
    
    # Load the world scene, overwriting the current keypad scene.
    var error = get_tree().change_scene_to_file(WORLD_SCENE_PATH)
    
    if error != 0:
        print(\"!!! FAILED to load world scene! Check the path: \", WORLD_SCENE_PATH)

# --- ENTER/OK BUTTON (Win Condition) ---

func _on_button_12_pressed() -> void: # Button 12 (ENTER/OK button)
    if label.text == PASSWORD:
        print(\"Password Correct! Changing scene...\")
        
        # --- SCENE CHANGE CODE ---
        var error = get_tree().change_scene_to_file(WORLD_SCENE_PATH)
        
        if error != 0:
            print(\"!!! SCENE CHANGE FAILED with error code: \", error)
        # -------------------------
            
    else:
        print(\"wrong password entered\")
        label.text = \"\" 	# clear input
"

[node name="keypad" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_ayi1g")

[node name="VBoxContainer" type="VBoxContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
metadata/_edit_use_anchors_ = true

[node name="MarginContainer" type="MarginContainer" parent="VBoxContainer"]
layout_direction = 1
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 16.43

[node name="ColorRect" type="ColorRect" parent="VBoxContainer/MarginContainer"]
layout_mode = 2
color = Color(0.5411765, 0.5254902, 1, 1)

[node name="Label" type="Label" parent="VBoxContainer/MarginContainer"]
layout_mode = 2
size_flags_vertical = 1
horizontal_alignment = 1
vertical_alignment = 1

[node name="GridContainer" type="GridContainer" parent="VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 5.71
columns = 3

[node name="Button" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "1"

[node name="Button3" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "2"

[node name="Button2" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "3"

[node name="Button4" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "4"

[node name="Button5" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "5"

[node name="Button6" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "6"

[node name="Button7" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "7"

[node name="Button8" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "8"

[node name="Button9" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "9"

[node name="Button10" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "0"

[node name="Button11" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "back"

[node name="Button12" type="Button" parent="VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "ok"

[connection signal="pressed" from="VBoxContainer/GridContainer/Button" to="." method="_on_button_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button3" to="." method="_on_button_3_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button2" to="." method="_on_button_2_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button4" to="." method="_on_button_4_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button5" to="." method="_on_button_5_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button6" to="." method="_on_button_6_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button7" to="." method="_on_button_7_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button8" to="." method="_on_button_8_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button9" to="." method="_on_button_9_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button10" to="." method="_on_button_10_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button11" to="." method="_on_button_11_pressed"]
[connection signal="pressed" from="VBoxContainer/GridContainer/Button12" to="." method="_on_button_12_pressed"]
